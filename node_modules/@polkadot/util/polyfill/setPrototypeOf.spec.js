"use strict";

// Copyright 2017-2020 @polkadot/util authors & contributors
// SPDX-License-Identifier: Apache-2.0

/* eslint-disable no-proto */
describe('setPrototypeOf', () => {
  let orig;
  beforeEach(() => {
    orig = Object.setPrototypeOf; // eslint-disable-next-line @typescript-eslint/ban-ts-comment
    // @ts-ignore

    Object.setPrototypeOf = null;

    require('./setPrototypeOf');
  });
  afterEach(() => {
    Object.setPrototypeOf = orig;
  });
  it('polyfills with no exceptions', () => {
    const obj = {};
    const proto = {
      foo: 'bar'
    }; // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access

    expect(Object.setPrototypeOf(obj, proto).__proto__).toBe(proto);
  });
});