"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _assert = _interopRequireDefault(require("../assert"));

// Copyright 2017-2020 @polkadot/util authors & contributors
// SPDX-License-Identifier: Apache-2.0

/* eslint-disable no-extend-native */
function getOffset(value, length) {
  return value < 0 ? Math.max(length + value, 0) : Math.min(value, length);
}

if (!Array.prototype.fill) {
  // eslint-disable-next-line no-extend-native
  Array.prototype.fill = function fill(value, start = 0, end) {
    (0, _assert.default)(this, 'this is null or not defined');
    const A = Object(this);
    const relativeEnd = end !== null && end !== void 0 ? end : A.length;
    const final = getOffset(relativeEnd, A.length);
    let k = getOffset(start, A.length);

    while (k < final) {
      A[k] = value;
      k++;
    }

    return A;
  };
}

if (!Uint8Array.prototype.fill) {
  // eslint-disable-next-line @typescript-eslint/ban-ts-comment
  // @ts-ignore
  Uint8Array.prototype.fill = Array.prototype.fill;
}